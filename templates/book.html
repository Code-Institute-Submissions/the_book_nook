{% extends "base.html" %}
{% block content %}
<section>
    <a class="buttons" href="{{ url_for('books') }}"><i class="fas fa-arrow-left"></i> Back to book collection</a>
    <div class="single-book-box">
        <div class="single-image-and-text">
            <span>
                <img class="single-book-image" src="{{ book.book_image_url }}">
            </span>
            <span class="single-text">
                <p class="single-book-title">{{ book.book_name }}</p>
                <p>by {{ book.book_author }}</p>
                <a href="{{ url_for('show_category', book_category=book.book_category) }}" class="single-book-category">
                    {{ book.book_category }}
                    </a>
                    {% if session.user %}
                    <p class="single-created-by">{{ book.created_by }} wrote:</p>
                    {% endif %}
                    <p class="single-book-description">{{ book.book_description }}
                    </p>
                    {% if session.user %}
                    <p>
                        <a href="{{ url_for('like_book', book_id=book._id) }}">
                            <i class="fa fa-heart"></i>
                        </a>
                        {{ book.likes }}
                    </p>
                    {% endif %}
                <span>
                    {% if session.user | lower == book.created_by | lower %}
                    <a class="book-buttons" href="{{ url_for('edit_book', book_id=book._id) }}"><i
                            class="fas fa-pencil-alt"></i> Edit Book</a>
                    <a class="book-buttons" href="{{ url_for('delete_book', book_id=book._id) }}"><i
                            class="fas fa-trash-alt"></i> Delete Book</a>
                </span>
                {% endif %}
            </span>
        </div>
    </div>

    <div class="comment-box">

        <h1 class="headline-medium">Comments by users: </h1>
        {% for comment in book.book_comment %}
        <p class="book-comment-section">{{ comment }}</p>
        {% endfor %}
    </div>

    <div class="add-edit-book-form">
        <form method="POST" action="{{ url_for('add_comment', book_id=book._id) }}">
            <label for="book_comment">Give us your thoughts about the book!</label>

            <textarea type="text" name="book_comment" id="book_comment" maxlength="500" required></textarea>
            <input class="buttons" type="submit" value="Submit">
        </form>

    </div>

</section>

{% endblock %}